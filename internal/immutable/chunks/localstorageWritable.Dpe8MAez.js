import{w as J}from"./index.6SKR3riS.js";import{e as N}from"./scheduler.Co-indjX.js";const i={};function O(t){return t}function p(t){return t}function E(t,f,r={}){const s=typeof window<"u"&&typeof window.localStorage<"u",S=r.toJSON||p,l=r.fromJSON||O,g=r.setInitial||!0;function u(o,n){return s&&window.localStorage.setItem(o,JSON.stringify(S(n))),n}if(!i[t]){let c=function(e){u(t,e),m(e)};const o=J(f,e=>{const d=s?window.localStorage.getItem(t):null;if(d?e(l(JSON.parse(d))):g&&u(t,f),s){let w=function(a){a.key===t&&e(a.newValue?l(JSON.parse(a.newValue)):null)};return window.addEventListener("storage",w),()=>{window.removeEventListener("storage",w)}}}),{subscribe:n,set:m}=o;i[t]={set:c,update(e){c(e(N(o)))},subscribe:n}}return i[t]}export{E as l};
