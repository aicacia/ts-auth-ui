import{t as Ee,f as ye,m as W,q as ne,a as Y,u as Z,g as x,b as $,n as ve,v as Ce,w as ge,r as be,l as Ie}from"./scheduler.Co-indjX.js";import{S as ee,i as te,c as z,d as H,m as P,o as I,p as U,q as K,e as E,s as R,a as y,b as S,f as j,h as v,j as d,k as B,l as h,z as J,y as X,H as G,I as Q,w as O,J as De,u as ie,v as F,x as Ve,t as we,g as ke}from"./index.DgSvAhbJ.js";import{I as Se,g as Ne,a as Ue}from"./Icon.BzT3WIqH.js";import{f as se,a as re}from"./index.CNy5KbZi.js";import{I as ae,d as Te,i as Le,S as qe,K as Ae,V as Re,v as oe,w as ue}from"./Spinner.DcLjFOas.js";import{h as je}from"./errors.8vFLI_ic.js";import{a as fe}from"./index.S6EU6auF.js";import{t as ce}from"./notifications.EKq79cz7.js";import{i as Be}from"./entry.Dfa5j_51.js";import{b as Me}from"./paths.C24qRk1J.js";function Oe(i,e="body"){let t;async function n(l){if(e=l,typeof e=="string"){if(t=document.querySelector(e),t===null&&(await Ee(),t=document.querySelector(e)),t===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)t=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);t.appendChild(i),i.hidden=!1}function r(){i.parentNode&&i.parentNode.removeChild(i)}return n(e),{update:n,destroy:r}}function ze(i){let e;const t=i[2].default,n=Y(t,i,i[3],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,l){n&&n.m(r,l),e=!0},p(r,l){n&&n.p&&(!e||l&8)&&Z(n,t,r,r[3],e?$(t,r[3],l,null):x(r[3]),null)},i(r){e||(I(n,r),e=!0)},o(r){U(n,r),e=!1},d(r){n&&n.d(r)}}}function He(i){let e,t;const n=[{name:"x"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[ze]},$$scope:{ctx:i}};for(let l=0;l<n.length;l+=1)r=W(r,n[l]);return e=new Se({props:r}),{c(){z(e.$$.fragment)},l(l){H(e.$$.fragment,l)},m(l,s){P(e,l,s),t=!0},p(l,[s]){const a=s&3?Ne(n,[n[0],s&2&&Ue(l[1]),s&1&&{iconNode:l[0]}]):{};s&8&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){t||(I(e.$$.fragment,l),t=!0)},o(l){U(e.$$.fragment,l),t=!1},d(l){K(e,l)}}}function Pe(i,e,t){let{$$slots:n={},$$scope:r}=e;const l=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];return i.$$set=s=>{t(1,e=W(W({},e),ne(s))),"$$scope"in s&&t(3,r=s.$$scope)},e=ne(e),[l,e,n,r]}class Ke extends ee{constructor(e){super(),te(this,e,Pe,He,ye,{})}}const Fe=i=>({}),de=i=>({});function me(i){let e,t,n;return{c(){e=E("div"),this.h()},l(r){e=y(r,"DIV",{class:!0}),S(e).forEach(v),this.h()},h(){d(e,"class","fixed inset-0 z-[10000] bg-black bg-opacity-25"),G(e,"hidden",i[2]?!i[0]:!0)},m(r,l){B(r,e,l),n=!0},p(r,l){(!n||l&5)&&G(e,"hidden",r[2]?!r[0]:!0)},i(r){n||(r&&ge(()=>{n&&(t||(t=Q(e,se,{duration:150},!0)),t.run(1))}),n=!0)},o(r){r&&(t||(t=Q(e,se,{duration:150},!1)),t.run(0)),n=!1},d(r){r&&v(e),r&&t&&t.end()}}}function _e(i){let e,t,n,r,l,s,a,f,o,w,_,g,k,p,D;const A=i[9].title,V=Y(A,i,i[8],de);o=new Ke({});const T=i[9].default,b=Y(T,i,i[8],null);return{c(){e=E("div"),t=E("div"),n=E("div"),r=E("div"),l=E("div"),V&&V.c(),s=R(),a=E("button"),f=E("div"),z(o.$$.fragment),w=R(),_=E("div"),b&&b.c(),this.h()},l(c){e=y(c,"DIV",{class:!0});var N=S(e);t=y(N,"DIV",{class:!0});var M=S(t);n=y(M,"DIV",{class:!0});var u=S(n);r=y(u,"DIV",{class:!0});var m=S(r);l=y(m,"DIV",{class:!0});var C=S(l);V&&V.l(C),C.forEach(v),s=j(m),a=y(m,"BUTTON",{class:!0});var L=S(a);f=y(L,"DIV",{class:!0});var q=S(f);H(o.$$.fragment,q),q.forEach(v),L.forEach(v),m.forEach(v),w=j(u),_=y(u,"DIV",{class:!0});var le=S(_);b&&b.l(le),le.forEach(v),u.forEach(v),M.forEach(v),N.forEach(v),this.h()},h(){d(l,"class","flex flex-grow flex-col"),d(f,"class","h-6 w-6"),d(a,"class","btn primary icon"),d(r,"class","flex flex-shrink flex-row items-start justify-between px-4 pt-4"),d(_,"class","relative flex-grow flex-col px-4 pb-4 pt-0"),d(n,"class","relative w-full rounded bg-white dark:bg-gray-800 shadow-lg sm:my-8 sm:max-w-lg"),G(n,"m-auto",i[1]),d(t,"class","flex min-h-full items-end justify-center p-4 sm:items-center sm:p-0"),d(e,"class","fixed inset-0 z-[10000] overflow-y-auto")},m(c,N){B(c,e,N),h(e,t),h(t,n),h(n,r),h(r,l),V&&V.m(l,null),h(r,s),h(r,a),h(a,f),P(o,f,null),h(n,w),h(n,_),b&&b.m(_,null),i[10](n),k=!0,p||(D=[O(a,"click",De(i[4])),O(e,"pointerdown",i[5])],p=!0)},p(c,N){V&&V.p&&(!k||N&256)&&Z(V,A,c,c[8],k?$(A,c[8],N,Fe):x(c[8]),de),b&&b.p&&(!k||N&256)&&Z(b,T,c,c[8],k?$(T,c[8],N,null):x(c[8]),null),(!k||N&2)&&G(n,"m-auto",c[1])},i(c){k||(I(V,c),I(o.$$.fragment,c),I(b,c),c&&ge(()=>{k&&(g||(g=Q(e,re,{duration:150,y:300},!0)),g.run(1))}),k=!0)},o(c){U(V,c),U(o.$$.fragment,c),U(b,c),c&&(g||(g=Q(e,re,{duration:150,y:300},!1)),g.run(0)),k=!1},d(c){c&&v(e),V&&V.d(c),K(o),b&&b.d(c),i[10](null),c&&g&&g.end(),p=!1,be(D)}}}function Je(i){let e,t,n,r,l,s=i[0]&&me(i),a=i[0]&&_e(i);return{c(){e=E("div"),s&&s.c(),t=R(),a&&a.c(),this.h()},l(f){e=y(f,"DIV",{class:!0,role:!0,"aria-modal":!0});var o=S(e);s&&s.l(o),t=j(o),a&&a.l(o),o.forEach(v),this.h()},h(){d(e,"class","relative"),d(e,"role","dialog"),d(e,"aria-modal","true")},m(f,o){B(f,e,o),s&&s.m(e,null),h(e,t),a&&a.m(e,null),n=!0,r||(l=Ce(Oe.call(null,e)),r=!0)},p(f,[o]){f[0]?s?(s.p(f,o),o&1&&I(s,1)):(s=me(f),s.c(),I(s,1),s.m(e,t)):s&&(J(),U(s,1,1,()=>{s=null}),X()),f[0]?a?(a.p(f,o),o&1&&I(a,1)):(a=_e(f),a.c(),I(a,1),a.m(e,null)):a&&(J(),U(a,1,1,()=>{a=null}),X())},i(f){n||(I(s),I(a),n=!0)},o(f){U(s),U(a),n=!1},d(f){f&&v(e),s&&s.d(),a&&a.d(),r=!1,l()}}}function Xe(i,e,t){let{$$slots:n={},$$scope:r}=e,{onClose:l=()=>{}}=e,{small:s=!1}=e,{open:a=!1}=e,{backdrop:f=!0}=e,{backgroundClose:o=f}=e;function w(){t(0,a=!1),l()}let _;function g(p){if(o){if(_.contains(p.target)){p.stopPropagation();return}a&&(t(0,a=!1),l())}}function k(p){Ie[p?"unshift":"push"](()=>{_=p,t(3,_)})}return i.$$set=p=>{"onClose"in p&&t(6,l=p.onClose),"small"in p&&t(1,s=p.small),"open"in p&&t(0,a=p.open),"backdrop"in p&&t(2,f=p.backdrop),"backgroundClose"in p&&t(7,o=p.backgroundClose),"$$scope"in p&&t(8,r=p.$$scope)},[a,s,f,_,w,g,l,o,r,n,k]}class ot extends ee{constructor(e){super(),te(this,e,Xe,Je,ve,{onClose:6,small:1,open:0,backdrop:2,backgroundClose:7})}}function pe(i){let e,t,n,r,l=i[4]&&he();function s(o,w){return o[2]==null?Qe:Ge}let a=s(i),f=a(i);return{c(){e=E("div"),t=E("button"),l&&l.c(),n=R(),f.c(),this.h()},l(o){e=y(o,"DIV",{class:!0});var w=S(e);t=y(w,"BUTTON",{type:!0,class:!0});var _=S(t);l&&l.l(_),n=j(_),f.l(_),_.forEach(v),w.forEach(v),this.h()},h(){d(t,"type","submit"),d(t,"class","btn primary flex flex-shrink"),t.disabled=i[8],d(e,"class","flex flex-row justify-end")},m(o,w){B(o,e,w),h(e,t),l&&l.m(t,null),h(t,n),f.m(t,null),r=!0},p(o,w){o[4]?l?w&16&&I(l,1):(l=he(),l.c(),I(l,1),l.m(t,n)):l&&(J(),U(l,1,1,()=>{l=null}),X()),a!==(a=s(o))&&(f.d(1),f=a(o),f&&(f.c(),f.m(t,null))),(!r||w&256)&&(t.disabled=o[8])},i(o){r||(I(l),r=!0)},o(o){U(l),r=!1},d(o){o&&v(e),l&&l.d(),f.d()}}}function he(i){let e,t,n,r;return n=new qe({}),{c(){e=E("div"),t=E("div"),z(n.$$.fragment),this.h()},l(l){e=y(l,"DIV",{class:!0});var s=S(e);t=y(s,"DIV",{class:!0});var a=S(t);H(n.$$.fragment,a),a.forEach(v),s.forEach(v),this.h()},h(){d(t,"class","inline-block w-6 h-6"),d(e,"class","flex flex-row justify-center mr-2")},m(l,s){B(l,e,s),h(e,t),P(n,t,null),r=!0},i(l){r||(I(n.$$.fragment,l),r=!0)},o(l){U(n.$$.fragment,l),r=!1},d(l){l&&v(e),K(n)}}}function Ge(i){let e;return{c(){e=we("Update")},l(t){e=ke(t,"Update")},m(t,n){B(t,e,n)},d(t){t&&v(e)}}}function Qe(i){let e;return{c(){e=we("Create")},l(t){e=ke(t,"Create")},m(t,n){B(t,e,n)},d(t){t&&v(e)}}}function We(i){let e,t,n,r="Description",l,s,a,f,o,w,_,g,k="URL Safe Short Name",p,D,A,V,T,b,c,N,M;o=new ae({props:{name:"description",result:i[3]}}),T=new ae({props:{name:"uri",result:i[3]}});let u=(i[5]!==i[0]||i[6]!==i[1])&&pe(i);return{c(){e=E("form"),t=E("div"),n=E("label"),n.textContent=r,l=R(),s=E("input"),f=R(),z(o.$$.fragment),w=R(),_=E("div"),g=E("label"),g.textContent=k,p=R(),D=E("input"),V=R(),z(T.$$.fragment),b=R(),u&&u.c(),this.h()},l(m){e=y(m,"FORM",{class:!0});var C=S(e);t=y(C,"DIV",{class:!0});var L=S(t);n=y(L,"LABEL",{for:!0,"data-svelte-h":!0}),ie(n)!=="svelte-x0kogn"&&(n.textContent=r),l=j(L),s=y(L,"INPUT",{id:!0,class:!0,type:!0,name:!0,placeholder:!0}),f=j(L),H(o.$$.fragment,L),L.forEach(v),w=j(C),_=y(C,"DIV",{class:!0});var q=S(_);g=y(q,"LABEL",{for:!0,"data-svelte-h":!0}),ie(g)!=="svelte-10oskxe"&&(g.textContent=k),p=j(q),D=y(q,"INPUT",{id:!0,class:!0,type:!0,name:!0,placeholder:!0}),V=j(q),H(T.$$.fragment,q),q.forEach(v),b=j(C),u&&u.l(C),C.forEach(v),this.h()},h(){d(n,"for","application-description"),d(s,"id","application-description"),d(s,"class",a="w-full "+i[7]("description")),d(s,"type","text"),d(s,"name","description"),d(s,"placeholder","Description"),d(t,"class","mb-2"),d(g,"for","application-uri"),d(D,"id","application-uri"),d(D,"class",A="w-full "+i[7]("uri")),d(D,"type","text"),d(D,"name","uri"),d(D,"placeholder","URL Safe Short Name"),d(_,"class","mb-2"),d(e,"class","flex flex-col flex-grow")},m(m,C){B(m,e,C),h(e,t),h(t,n),h(t,l),h(t,s),F(s,i[0]),h(t,f),P(o,t,null),h(e,w),h(e,_),h(_,g),h(_,p),h(_,D),F(D,i[1]),h(_,V),P(T,_,null),h(e,b),u&&u.m(e,null),c=!0,N||(M=[O(s,"input",i[13]),O(s,"input",i[9]),O(D,"input",i[14]),O(D,"input",i[10]),O(e,"submit",Ve(i[11]))],N=!0)},p(m,[C]){(!c||C&128&&a!==(a="w-full "+m[7]("description")))&&d(s,"class",a),C&1&&s.value!==m[0]&&F(s,m[0]);const L={};C&8&&(L.result=m[3]),o.$set(L),(!c||C&128&&A!==(A="w-full "+m[7]("uri")))&&d(D,"class",A),C&2&&D.value!==m[1]&&F(D,m[1]);const q={};C&8&&(q.result=m[3]),T.$set(q),m[5]!==m[0]||m[6]!==m[1]?u?(u.p(m,C),C&99&&I(u,1)):(u=pe(m),u.c(),I(u,1),u.m(e,null)):u&&(J(),U(u,1,1,()=>{u=null}),X())},i(m){c||(I(o.$$.fragment,m),I(T.$$.fragment,m),I(u),c=!0)},o(m){U(o.$$.fragment,m),U(T.$$.fragment,m),U(u),c=!1},d(m){m&&v(e),K(o),K(T),u&&u.d(),N=!1,be(M)}}}const Ye=()=>Ae((i={},e)=>{e.length&&(Re(e),oe("description","required",()=>{ue(i.description).isNotBlank()}),oe("uri","required",()=>{ue(i.uri).isNotBlank()}))});function Ze(i,e,t){let n,r,{id:l=void 0}=e,{description:s=""}=e,{uri:a=""}=e,{onDone:f}=e;const o=Ye();let w=s,_=a,g=o.get();const k=new Set,p=Te(()=>{o({description:s,uri:a},Array.from(k)).done(u=>{t(3,g=u)}),k.clear()},300);function D(){k.add("description"),k.add("uri"),p(),p.flush()}function A(u){k.add(u.currentTarget.name),p()}function V(u){t(1,a=ce(s)),A(u)}function T(u){t(1,a=ce(a)),A(u)}let b=!1;async function c(){try{if(t(4,b=!0),D(),g.isValid()){const u=l==null?await fe.create({description:s,uri:a}):await fe.update(l,{description:s,uri:a});l==null&&await Be(`${Me}/applications`),t(5,w=u.description),t(6,_=u.uri),f(u),o.reset()}}catch(u){await je(u)}finally{t(4,b=!1)}}function N(){s=this.value,t(0,s)}function M(){a=this.value,t(1,a)}return i.$$set=u=>{"id"in u&&t(2,l=u.id),"description"in u&&t(0,s=u.description),"uri"in u&&t(1,a=u.uri),"onDone"in u&&t(12,f=u.onDone)},i.$$.update=()=>{i.$$.dirty&16&&t(8,n=b),i.$$.dirty&8&&t(7,r=Le(g,{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}))},[s,a,l,g,b,w,_,r,n,V,T,c,f,N,M]}class ut extends ee{constructor(e){super(),te(this,e,Ze,We,ve,{id:2,description:0,uri:1,onDone:12})}}export{ut as A,ot as M};
