import{n as we,r as be,c as Ie}from"../chunks/scheduler.DfWX43tP.js";import{S as Ee,i as ye,s as T,e as E,t as x,c as re,z as ke,h as _,f as A,a as y,b as P,g as ee,d as ue,j as n,k as te,l as u,u as Z,m as oe,v as R,w as Pe,n as ae,o as L,p as F,y as $e,q as ie,x as De}from"../chunks/index.yw1ujjTK.js";import{I as ce,d as Se,i as Ve,S as je,K as Te,V as Ae,v as me,w as he}from"../chunks/Spinner.DpnkzrsM.js";import{L as Ne}from"../chunks/i18n-svelte.BQ-05D1a.js";import{g as Oe}from"../chunks/entry.PqAeg84Z.js";import{b as ge}from"../chunks/paths.BVXwFHBQ.js";import{s as qe}from"../chunks/user.CWLSZk9A.js";import{h as Ce}from"../chunks/errors.DI1mLwO8.js";const Le=!1,Ue=async e=>{const{openIDConfiguration:a}=await e.parent(),s=e.url.searchParams.get("code");return{openIDConfiguration:a,code:s}},Xe=Object.freeze(Object.defineProperty({__proto__:null,load:Ue,prerender:Le},Symbol.toStringTag,{value:"Module"}));function _e(e){let a,s,l=e[7].auth.notAMember()+"",r,o,i,w=e[7].auth.signUp()+"",k;return{c(){a=E("p"),s=E("span"),r=x(l),o=T(),i=E("a"),k=x(w),this.h()},l(h){a=y(h,"P",{class:!0});var d=P(a);s=y(d,"SPAN",{});var p=P(s);r=ee(p,l),p.forEach(_),o=A(d),i=y(d,"A",{href:!0,class:!0});var I=P(i);k=ee(I,w),I.forEach(_),d.forEach(_),this.h()},h(){n(i,"href",`${ge}/signup`),n(i,"class","underline text-blue-500"),n(a,"class","py-2")},m(h,d){te(h,a,d),u(a,s),u(s,r),u(a,o),u(a,i),u(i,k)},p(h,d){d&128&&l!==(l=h[7].auth.notAMember()+"")&&ae(r,l),d&128&&w!==(w=h[7].auth.signUp()+"")&&ae(k,w)},d(h){h&&_(a)}}}function ve(e){let a,s,l,r;return l=new je({}),{c(){a=E("div"),s=E("div"),re(l.$$.fragment),this.h()},l(o){a=y(o,"DIV",{class:!0});var i=P(a);s=y(i,"DIV",{class:!0});var w=P(s);ue(l.$$.fragment,w),w.forEach(_),i.forEach(_),this.h()},h(){n(s,"class","inline-block w-6 h-6"),n(a,"class","flex flex-row justify-center mr-2")},m(o,i){te(o,a,i),u(a,s),oe(l,s,null),r=!0},i(o){r||(L(l.$$.fragment,o),r=!0)},o(o){F(l.$$.fragment,o),r=!1},d(o){o&&_(a),ie(l)}}}function Me(e){var de;let a,s,l,r,o,i=e[7].auth.signIn()+"",w,k,h=(de=e[0].openIDConfiguration)==null?void 0:de.grant_types_supported.includes("password"),d,p,I,v,O,V,U,S,M,f,g,H,G,se,N,ne,q,$,J,B=e[7].auth.signIn()+"",Q,D,le,fe;document.title=a=e[7].auth.signIn();let b=h&&_e(e);S=new ce({props:{name:"username",result:e[1]}}),N=new ce({props:{name:"password",result:e[1]}});let c=e[2]&&ve();return{c(){s=T(),l=E("div"),r=E("div"),o=E("h1"),w=x(i),k=T(),b&&b.c(),d=T(),p=E("form"),I=E("div"),v=E("input"),U=T(),re(S.$$.fragment),M=T(),f=E("div"),g=E("input"),se=T(),re(N.$$.fragment),ne=T(),q=E("div"),$=E("button"),c&&c.c(),J=T(),Q=x(B),this.h()},l(t){ke("svelte-1jem6qx",document.head).forEach(_),s=A(t),l=y(t,"DIV",{class:!0});var z=P(l);r=y(z,"DIV",{class:!0});var j=P(r);o=y(j,"H1",{class:!0});var K=P(o);w=ee(K,i),K.forEach(_),k=A(j),b&&b.l(j),d=A(j),p=y(j,"FORM",{});var C=P(p);I=y(C,"DIV",{class:!0});var W=P(I);v=y(W,"INPUT",{class:!0,type:!0,name:!0,autocomplete:!0,placeholder:!0}),U=A(W),ue(S.$$.fragment,W),W.forEach(_),M=A(C),f=y(C,"DIV",{class:!0});var X=P(f);g=y(X,"INPUT",{class:!0,type:!0,name:!0,autocomplete:!0,placeholder:!0}),se=A(X),ue(N.$$.fragment,X),X.forEach(_),ne=A(C),q=y(C,"DIV",{class:!0});var pe=P(q);$=y(pe,"BUTTON",{type:!0,class:!0});var Y=P($);c&&c.l(Y),J=A(Y),Q=ee(Y,B),Y.forEach(_),pe.forEach(_),C.forEach(_),j.forEach(_),z.forEach(_),this.h()},h(){n(o,"class","mb-1"),n(v,"class",O="w-full "+e[5]("username")),n(v,"type","text"),n(v,"name","username"),n(v,"autocomplete","username"),n(v,"placeholder",V=e[7].auth.usernameOrEmailPlaceholder()),n(I,"class","mb-2"),n(g,"class",H="w-full "+e[5]("password")),n(g,"type","password"),n(g,"name","password"),n(g,"autocomplete","current-password"),n(g,"placeholder",G=e[7].auth.passwordPlaceholder()),n(f,"class","mb-2"),n($,"type","submit"),n($,"class","btn primary flex flex-shrink"),$.disabled=e[6],n(q,"class","flex flex-row justify-end"),n(r,"class","flex flex-col flex-shrink md:w-72 w-full mx-auto my-10 bg-white dark:bg-gray-800 shadow p-4"),n(l,"class","flex flex-col flex-grow justify-end md:justify-start")},m(t,m){te(t,s,m),te(t,l,m),u(l,r),u(r,o),u(o,w),u(r,k),b&&b.m(r,null),u(r,d),u(r,p),u(p,I),u(I,v),Z(v,e[3]),u(I,U),oe(S,I,null),u(p,M),u(p,f),u(f,g),Z(g,e[4]),u(f,se),oe(N,f,null),u(p,ne),u(p,q),u(q,$),c&&c.m($,null),u($,J),u($,Q),D=!0,le||(fe=[R(v,"input",e[10]),R(v,"input",e[8]),R(g,"input",e[11]),R(g,"input",e[8]),R(p,"submit",Pe(e[9]))],le=!0)},p(t,[m]){var K;(!D||m&128)&&a!==(a=t[7].auth.signIn())&&(document.title=a),(!D||m&128)&&i!==(i=t[7].auth.signIn()+"")&&ae(w,i),m&1&&(h=(K=t[0].openIDConfiguration)==null?void 0:K.grant_types_supported.includes("password")),h?b?b.p(t,m):(b=_e(t),b.c(),b.m(r,d)):b&&(b.d(1),b=null),(!D||m&32&&O!==(O="w-full "+t[5]("username")))&&n(v,"class",O),(!D||m&128&&V!==(V=t[7].auth.usernameOrEmailPlaceholder()))&&n(v,"placeholder",V),m&8&&v.value!==t[3]&&Z(v,t[3]);const z={};m&2&&(z.result=t[1]),S.$set(z),(!D||m&32&&H!==(H="w-full "+t[5]("password")))&&n(g,"class",H),(!D||m&128&&G!==(G=t[7].auth.passwordPlaceholder()))&&n(g,"placeholder",G),m&16&&g.value!==t[4]&&Z(g,t[4]);const j={};m&2&&(j.result=t[1]),N.$set(j),t[2]?c?m&4&&L(c,1):(c=ve(),c.c(),L(c,1),c.m($,J)):c&&(De(),F(c,1,1,()=>{c=null}),$e()),(!D||m&128)&&B!==(B=t[7].auth.signIn()+"")&&ae(Q,B),(!D||m&64)&&($.disabled=t[6])},i(t){D||(L(S.$$.fragment,t),L(N.$$.fragment,t),L(c),D=!0)},o(t){F(S.$$.fragment,t),F(N.$$.fragment,t),F(c),D=!1},d(t){t&&(_(s),_(l)),b&&b.d(),ie(S),ie(N),c&&c.d(),le=!1,be(fe)}}}const Be=()=>Te((e={},a)=>{a.length&&(Ae(a),me("username","required",()=>{he(e.username).isNotBlank()}),me("password","required",()=>{he(e.password).isNotBlank()}))});function ze(e,a,s){let l,r,o;Ie(e,Ne,f=>s(7,o=f));let{data:i}=a;const w=Be();let k="",h="",d=w.get();const p=new Set,I=Se(()=>{w({username:k,password:h},Array.from(p)).done(f=>{s(1,d=f)}),p.clear()},300);function v(){p.add("username"),p.add("password"),I(),I.flush()}function O(f){f.currentTarget.value=f.currentTarget.value.trim(),p.add(f.currentTarget.name),I()}let V=!1;async function U(f){try{s(2,V=!0),v(),d.isValid()&&(await qe(k,h),await Oe(`${ge}/`))}catch(g){await Ce(g)}finally{s(2,V=!1)}}function S(){k=this.value,s(3,k)}function M(){h=this.value,s(4,h)}return e.$$set=f=>{"data"in f&&s(0,i=f.data)},e.$$.update=()=>{e.$$.dirty&4&&s(6,l=V),e.$$.dirty&2&&s(5,r=Ve(d,{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}))},[i,d,V,k,h,r,l,o,O,U,S,M]}class Ye extends Ee{constructor(a){super(),ye(this,a,ze,Me,we,{data:0})}}export{Ye as component,Xe as universal};
