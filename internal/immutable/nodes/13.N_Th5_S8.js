import{r as Ke}from"../chunks/index.De_1-CT6.js";import{b as Ae}from"../chunks/paths.BoepOE7F.js";import{c as Re}from"../chunks/notifications.Bl8Tb2ID.js";import{n as Fe,r as He,c as Ge}from"../chunks/scheduler.Bd7mgcTo.js";import{S as Je,i as Qe,s as C,e as i,t as Ee,c as re,z as We,h as f,f as k,a as p,b,g as Ie,d as ne,j as t,k as je,l as s,u as H,m as ue,v as B,w as Xe,n as Pe,o as G,p as X,y as Ye,q as oe,x as Ze}from"../chunks/index.OZdkVM2I.js";import{I as ye,d as xe,i as ea,S as aa,K as ta,V as sa,v as se,w as le}from"../chunks/Spinner.BF-bUlGL.js";import{L as la}from"../chunks/i18n-svelte.DO1mDHaz.js";import{g as ra}from"../chunks/entry.5DHIJE4I.js";import{a as na}from"../chunks/user.DXNa1y6L.js";import{h as ua}from"../chunks/errors.DvyKmB4R.js";const oa=async e=>{const{openIDConfiguration:r}=await e.parent();if(!(r!=null&&r.grant_types_supported.includes("password")))Re("Sign up is not enabled."),Ke(302,`${Ae}/signin`);else return{openIDConfiguration:r}},Ea=Object.freeze(Object.defineProperty({__proto__:null,load:oa},Symbol.toStringTag,{value:"Module"}));function ze(e){let r,n,m,d;return m=new aa({}),{c(){r=i("div"),n=i("div"),re(m.$$.fragment),this.h()},l(u){r=p(u,"DIV",{class:!0});var I=b(r);n=p(I,"DIV",{class:!0});var P=b(n);ne(m.$$.fragment,P),P.forEach(f),I.forEach(f),this.h()},h(){t(n,"class","inline-block w-6 h-6"),t(r,"class","flex flex-row justify-center mr-2")},m(u,I){je(u,r,I),s(r,n),ue(m,n,null),d=!0},i(u){d||(G(m.$$.fragment,u),d=!0)},o(u){X(m.$$.fragment,u),d=!1},d(u){u&&f(r),oe(m)}}}function ia(e){let r,n,m,d,u,I=e[8].auth.signUp()+"",P,q,$,V,N=e[8].auth.alreadyAMember()+"",y,J,D,Q=e[8].auth.signIn()+"",j,x,_,S,h,Y,E,Ce,L,ke,M,v,ie,pe,Ue,O,Ve,z,w,fe,me,Ne,K,Se,R,g,de,ce,Te,F,qe,Z,U,he,ee=e[8].auth.signUp()+"",_e,c,De,Be;document.title=r=e[8].auth.signUp(),L=new ye({props:{name:"email",result:e[0]}}),O=new ye({props:{name:"username",result:e[0]}}),K=new ye({props:{name:"password",result:e[0]}}),F=new ye({props:{name:"passwordConfirmation",result:e[0]}});let o=e[1]&&ze();return{c(){n=C(),m=i("div"),d=i("div"),u=i("h1"),P=Ee(I),q=C(),$=i("p"),V=i("span"),y=Ee(N),J=C(),D=i("a"),j=Ee(Q),x=C(),_=i("form"),S=i("div"),h=i("input"),Ce=C(),re(L.$$.fragment),ke=C(),M=i("div"),v=i("input"),Ue=C(),re(O.$$.fragment),Ve=C(),z=i("div"),w=i("input"),Ne=C(),re(K.$$.fragment),Se=C(),R=i("div"),g=i("input"),Te=C(),re(F.$$.fragment),qe=C(),Z=i("div"),U=i("button"),o&&o.c(),he=C(),_e=Ee(ee),this.h()},l(a){We("svelte-yw6pq7",document.head).forEach(f),n=k(a),m=p(a,"DIV",{class:!0});var ae=b(m);d=p(ae,"DIV",{class:!0});var A=b(d);u=p(A,"H1",{class:!0});var te=b(u);P=Ie(te,I),te.forEach(f),q=k(A),$=p(A,"P",{class:!0});var W=b($);V=p(W,"SPAN",{});var Le=b(V);y=Ie(Le,N),Le.forEach(f),J=k(W),D=p(W,"A",{href:!0,class:!0});var Me=b(D);j=Ie(Me,Q),Me.forEach(f),W.forEach(f),x=k(A),_=p(A,"FORM",{});var T=b(_);S=p(T,"DIV",{class:!0});var ve=b(S);h=p(ve,"INPUT",{class:!0,type:!0,name:!0,autocomplete:!0,placeholder:!0}),Ce=k(ve),ne(L.$$.fragment,ve),ve.forEach(f),ke=k(T),M=p(T,"DIV",{class:!0});var we=b(M);v=p(we,"INPUT",{class:!0,type:!0,name:!0,autocomplete:!0,placeholder:!0}),Ue=k(we),ne(O.$$.fragment,we),we.forEach(f),Ve=k(T),z=p(T,"DIV",{class:!0});var ge=b(z);w=p(ge,"INPUT",{class:!0,type:!0,name:!0,autocomplete:!0,placeholder:!0}),Ne=k(ge),ne(K.$$.fragment,ge),ge.forEach(f),Se=k(T),R=p(T,"DIV",{class:!0});var be=b(R);g=p(be,"INPUT",{class:!0,type:!0,name:!0,autocomplete:!0,placeholder:!0}),Te=k(be),ne(F.$$.fragment,be),be.forEach(f),qe=k(T),Z=p(T,"DIV",{class:!0});var Oe=b(Z);U=p(Oe,"BUTTON",{type:!0,class:!0});var $e=b(U);o&&o.l($e),he=k($e),_e=Ie($e,ee),$e.forEach(f),Oe.forEach(f),T.forEach(f),A.forEach(f),ae.forEach(f),this.h()},h(){t(u,"class","mb-1"),t(D,"href",`${Ae}/signin`),t(D,"class","underline text-blue-500"),t($,"class","py-2"),t(h,"class",Y="w-full "+e[6]("email")),t(h,"type","email"),t(h,"name","email"),t(h,"autocomplete","email"),t(h,"placeholder",E=e[8].auth.emailPlaceholder()),t(S,"class","mb-2"),t(v,"class",ie="w-full "+e[6]("username")),t(v,"type","text"),t(v,"name","username"),t(v,"autocomplete","username"),t(v,"placeholder",pe=e[8].auth.usernamePlaceholder()),t(M,"class","mb-2"),t(w,"class",fe="w-full "+e[6]("password")),t(w,"type","password"),t(w,"name","password"),t(w,"autocomplete","new-password"),t(w,"placeholder",me=e[8].auth.passwordPlaceholder()),t(z,"class","mb-2"),t(g,"class",de="w-full "+e[6]("passwordConfirmation")),t(g,"type","password"),t(g,"name","passwordConfirmation"),t(g,"autocomplete","new-password"),t(g,"placeholder",ce=e[8].auth.passwordConfirmationPlaceholder()),t(R,"class","mb-2"),t(U,"type","submit"),t(U,"class","btn primary flex flex-shrink"),U.disabled=e[7],t(Z,"class","flex flex-row justify-end"),t(d,"class","flex flex-col flex-shrink md:w-72 w-full mx-auto my-10 bg-white dark:bg-gray-800 shadow p-4"),t(m,"class","flex flex-col flex-grow justify-end md:justify-start")},m(a,l){je(a,n,l),je(a,m,l),s(m,d),s(d,u),s(u,P),s(d,q),s(d,$),s($,V),s(V,y),s($,J),s($,D),s(D,j),s(d,x),s(d,_),s(_,S),s(S,h),H(h,e[3]),s(S,Ce),ue(L,S,null),s(_,ke),s(_,M),s(M,v),H(v,e[2]),s(M,Ue),ue(O,M,null),s(_,Ve),s(_,z),s(z,w),H(w,e[4]),s(z,Ne),ue(K,z,null),s(_,Se),s(_,R),s(R,g),H(g,e[5]),s(R,Te),ue(F,R,null),s(_,qe),s(_,Z),s(Z,U),o&&o.m(U,null),s(U,he),s(U,_e),c=!0,De||(Be=[B(h,"input",e[11]),B(h,"input",e[9]),B(v,"input",e[12]),B(v,"input",e[9]),B(w,"input",e[13]),B(w,"input",e[9]),B(g,"input",e[14]),B(g,"input",e[9]),B(_,"submit",Xe(e[10]))],De=!0)},p(a,[l]){(!c||l&256)&&r!==(r=a[8].auth.signUp())&&(document.title=r),(!c||l&256)&&I!==(I=a[8].auth.signUp()+"")&&Pe(P,I),(!c||l&256)&&N!==(N=a[8].auth.alreadyAMember()+"")&&Pe(y,N),(!c||l&256)&&Q!==(Q=a[8].auth.signIn()+"")&&Pe(j,Q),(!c||l&64&&Y!==(Y="w-full "+a[6]("email")))&&t(h,"class",Y),(!c||l&256&&E!==(E=a[8].auth.emailPlaceholder()))&&t(h,"placeholder",E),l&8&&h.value!==a[3]&&H(h,a[3]);const ae={};l&1&&(ae.result=a[0]),L.$set(ae),(!c||l&64&&ie!==(ie="w-full "+a[6]("username")))&&t(v,"class",ie),(!c||l&256&&pe!==(pe=a[8].auth.usernamePlaceholder()))&&t(v,"placeholder",pe),l&4&&v.value!==a[2]&&H(v,a[2]);const A={};l&1&&(A.result=a[0]),O.$set(A),(!c||l&64&&fe!==(fe="w-full "+a[6]("password")))&&t(w,"class",fe),(!c||l&256&&me!==(me=a[8].auth.passwordPlaceholder()))&&t(w,"placeholder",me),l&16&&w.value!==a[4]&&H(w,a[4]);const te={};l&1&&(te.result=a[0]),K.$set(te),(!c||l&64&&de!==(de="w-full "+a[6]("passwordConfirmation")))&&t(g,"class",de),(!c||l&256&&ce!==(ce=a[8].auth.passwordConfirmationPlaceholder()))&&t(g,"placeholder",ce),l&32&&g.value!==a[5]&&H(g,a[5]);const W={};l&1&&(W.result=a[0]),F.$set(W),a[1]?o?l&2&&G(o,1):(o=ze(),o.c(),G(o,1),o.m(U,he)):o&&(Ze(),X(o,1,1,()=>{o=null}),Ye()),(!c||l&256)&&ee!==(ee=a[8].auth.signUp()+"")&&Pe(_e,ee),(!c||l&128)&&(U.disabled=a[7])},i(a){c||(G(L.$$.fragment,a),G(O.$$.fragment,a),G(K.$$.fragment,a),G(F.$$.fragment,a),G(o),c=!0)},o(a){X(L.$$.fragment,a),X(O.$$.fragment,a),X(K.$$.fragment,a),X(F.$$.fragment,a),X(o),c=!1},d(a){a&&(f(n),f(m)),oe(L),oe(O),oe(K),oe(F),o&&o.d(),De=!1,He(Be)}}}const pa=()=>ta((e={},r)=>{r.size&&(sa(Array.from(r)),se("email","required",()=>{le(e.email).isNotBlank()}),se("username","required",()=>{le(e.username).isNotBlank()}),se("password","required",()=>{le(e.password).isNotBlank()}),se("passwordConfirmation","required",()=>{le(e.passwordConfirmation).isNotBlank()}),se("passwordConfirmation","password_confirmation_mismatch",()=>{le(e.passwordConfirmation).equals(e.password)}))});function fa(e,r,n){let m,d,u;Ge(e,la,E=>n(8,u=E));const I=pa();let P="",q="",$="",V="",N=I.get();const y=new Set,J=xe(()=>{I({username:P,password:$,passwordConfirmation:V,email:q},y).done(E=>{n(0,N=E)}),y.clear()},300);function D(){y.add("username"),y.add("password"),y.add("passwordConfirmation"),y.add("email"),y.add("countryId"),J(),J.flush()}function Q(E){E.currentTarget.value=E.currentTarget.value.trim(),y.add(E.currentTarget.name),J()}let j=!1;async function x(){try{n(1,j=!0),D(),N.isValid()&&(await na(P,$,V,q),await ra(`${Ae}/`))}catch(E){await ua(E)}finally{n(1,j=!1)}}function _(){q=this.value,n(3,q)}function S(){P=this.value,n(2,P)}function h(){$=this.value,n(4,$)}function Y(){V=this.value,n(5,V)}return e.$$.update=()=>{e.$$.dirty&2&&n(7,m=j),e.$$.dirty&1&&n(6,d=ea(N,{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}))},[N,j,P,q,$,V,d,m,u,Q,x,_,S,h,Y]}class Ia extends Je{constructor(r){super(),Qe(this,r,fa,ia,Fe,{})}}export{Ia as component,Ea as universal};
